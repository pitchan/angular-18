<div id="rxjsPage" class="flex ">
  <div class="flex flex-col gap-4 w-3/6 pr-4"> 
    <mat-card class="w-full mt-3">
      <mat-checkbox 
        [(ngModel)]="isDelay" 
        [id]="'delay'">
        Set delay to list request
      </mat-checkbox>
    </mat-card>  
    
    <app-pokemon-autocomplete 
      [pokemonList]="filteredPokemonsSwitchMap$ | async" 
      [control]="autoCompleteSwitchMapControl"
      label="switchMap">
    </app-pokemon-autocomplete>

    <app-pokemon-autocomplete 
      [pokemonList]="filteredPokemonsConcatMap$ | async" 
      [control]="autoCompleteConcatMapControl"
      label="concatMap">
    </app-pokemon-autocomplete>

    <app-pokemon-autocomplete 
      [pokemonList]="filteredPokemonsMergeMap$ | async" 
      [control]="autoCompleteMergeMapControl"
      label="mergeMap">
    </app-pokemon-autocomplete>

    <app-pokemon-autocomplete 
      [pokemonList]="filteredPokemonsExhaustMap$ | async" 
      [control]="autoCompleteExhaustMapControl"
      label="exhaustMap">
    </app-pokemon-autocomplete>
      
      
    <mat-card>  
      @if (selectedPokemon()) {
        <h1 class="text-700 text-center">{{ selectedPokemon()?.name }}</h1>
        <div class="overflow-hidden text-center">
          <img 
            [src]="selectedPokemon()?.sprites?.picture" 
            alt="Pokemon Image" 
            class="pokemon-image"
            (click)="openPreview(selectedPokemon()?.sprites?.bigPicture)"
          />
        </div>
      } @else {
        <h1 class="text-700 text-center">Select Pokemon</h1>
      }     
    </mat-card>
    
  </div>
  <div class="w-3/6">
    <!-- Affichage des logs -->
    <mat-card class="my-3">
      <div class="flex">
        <div class="flex items-center h-12">
          <button mat-button color="warn" [disabled]="logMessages().length === 0" (click)="clearLogs()">
            <mat-icon >delete</mat-icon>
          </button>
        </div> 
        <mat-divider vertical></mat-divider>
        <div class="ml-3 content-center">
          <div class="text-gray-700 text-2xl font-bold">Request Logs</div>
        </div>
      </div>
    
      <mat-divider></mat-divider>
    
      @if (logMessages().length > 0) {
        <div class="m-4 max-h-96 overflow-auto">
          @for (log of logMessages(); track log) {
            <div class="m-1">
              <mat-chip color="primary">
                {{ log.message }}
              </mat-chip>
            </div>
          }     
        </div>   
      } @else {
        <div>
          <h1 class="text-gray-400 text-center">No logs</h1>
        </div>
      }      
    </mat-card>
  </div>
<div>
